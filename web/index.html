<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Haiku aus dem Nationalrat</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body v-scope="App">
    <div id="fade-overlay"></div>
    <div id="content" v-cloak>
      <main>
        <div
          class="context"
          id="context-before"
          v-bind:class="{ hidden: !App.isContextPresented }"
        >
          {{ App.currentHaiku.context_before }}
        </div>
        <div class="haiku" id="haiku">
          <div class="line">{{ App.currentHaiku.line1 }}</div>
          <div class="line">{{ App.currentHaiku.line2 }}</div>
          <div class="line">{{ App.currentHaiku.line3 }}</div>
        </div>
        <div class="context" v-bind:class="{ hidden: !App.isContextPresented }">
          {{ App.currentHaiku.context_after }}
        </div>
        <div class="meta">
          <img
            id="person-image"
            :src="App.currentHaiku.image_url"
            :style="{ background: App.conicGradient }"
          />
          <div>
            <a
              class="name"
              :href="`leaderboard.html?personId=${App.currentHaiku.person_id}`"
              >{{ App.currentHaiku.person_name }}</a
            >
            <span class="party">({{ App.parties }})</span>
          </div>
          <div>
            <span class="date">am {{ App.date }}</span>
            (<span
              class="period"
              :title="`${App.currentHaiku.period }. Gesetzgebungsperiode`"
              >{{ App.currentHaiku.period_roman }}. GP</span
            >,
            <span
              class="session-number"
              :title="`${App.currentHaiku.session}. Nationalratssitzung`"
            >
              {{ App.currentHaiku.session }}/NRSITZ</span
            >)
          </div>
          <button class="context-toggle" @click="toggleIsContextPresented()">
            {{ App.isContextPresented ? "✕" : "≡" }} Kontext {{
            App.isContextPresented ? "verbergen" : "anzeigen" }}
          </button>
        </div>

        <div class="voting">
          <button
            class="vote-btn"
            @click="App.vote(1)"
            :disabled="App.currentHaiku.has_voted_up"
          >
            ▲ Gutes Haiku
          </button>
          <button
            class="vote-btn"
            @click="App.vote(-1)"
            :disabled="App.currentHaiku.has_voted_down"
          >
            ▼ Schlechtes Haiku
          </button>
        </div>
        <div
          class="score"
          v-bind:class="{ hidden: !(App.currentHaiku.has_voted_up || App.currentHaiku.has_voted_down) }"
        >
          <div
            class="score-bars"
            :style="`grid-template-columns: ${App.votesPercentage.up}% ${App.votesPercentage.down}%`"
          >
            <div class="upvotes-score-bar"></div>
            <div class="downvotes-score-bar"></div>
          </div>
          <div class="score-counts">
            <div class="upvotes-score-count">
              {{ App.currentHaiku.upvotes }} ▲
            </div>
            <div class="downvotes-score-count">
              {{ App.currentHaiku.downvotes }} ▼
            </div>
          </div>
        </div>

        <button class="change-haiku" @click="App.loadHaiku()">
          ⟳ Anderes Haiku
        </button>
      </main>
      <nav aria-label="Primary">
        Ein Haiku
        <a href="leaderboard.html">Leaderboard</a>
        <a href="faq.html">FAQ</a>
      </nav>
    </div>
    <script type="module" src="haiku.js"></script>
  </body>
</html>
